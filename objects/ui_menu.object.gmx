<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_menu</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>5</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///menu_animation
var mAnim=-n1;
var mAS = -n1;
var mAO = -n1;
var i=n0;
repeat(13){
    switch(i){
        case 0: mAS = spr_anim_menu_0; mAO=anim_shaft; break;
        case 1: mAS = spr_anim_menu_1; mAO=anim; break;
        case 2: mAS = spr_anim_menu_2; mAO=anim_swing; break;
        case 3: mAS = spr_anim_menu_3; mAO=anim_swing; break;
        case 4: mAS = spr_anim_menu_4; mAO=anim_swing; break;
        case 5: mAS = spr_anim_menu_5; mAO=anim_swing; break;
        case 6: mAS = spr_anim_menu_6; mAO=anim_swing; break;
        case 7: mAS = spr_anim_menu_7; mAO=anim; break;
        case 8: mAS = spr_anim_menu_8; mAO=anim; break;
        case 9: mAS = spr_anim_menu_9; mAO=anim; break;
        case 10: mAS = spr_anim_menu_10; mAO=anim; break;
        case 11: mAS = spr_anim_menu_11; mAO=anim; break;
        case 12: mAS = spr_anim_menu_12; mAO=anim; break;
    }
    mAnim = instance_create(sprite_get_xoffset(mAS),sprite_get_yoffset(mAS)+80,mAO);
    mAnim.depth=10+i;
    mAnim.sprite_index=mAS;
i++;}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///startup_script
state=n0;
stime=n0;
s2time=n0;
menu=-n1;
mtime=n0;
next_room=-n1;
page=n0;
//load gp amount
gp_amount=""; event_perform(ev_other,ev_user0);
//show results if we just leave the game 
if(global.result_message!=""){
    var dr = instance_create(0,0,ui_dialog_result);
    dr.text=global.result_message;
    dr.buttontext=global.txt_ok;
    global.result_message="";
    //cleanup
    func_gameplay_end();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///sync gp
gp_amount = string(func_gp(GP_CMD_GET,-n1,-n1));
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///script
//anim
var st=stime/60;
if(state==0){
    if(stime&lt;60){stime++}//anim_in
    //click
    else if(mouse_check_button_released(mb_left)){if(!instance_exists(ui_dialog)&amp;&amp;!instance_exists(ui_team)){
        if(menu!=n1){//no home menu
            //bottom_menu
            if(mouse_y&gt;=1040){func_sound_click();
                var menuChosen = clamp(floor((mouse_x-40)/160),0,3);
                if(menuChosen!=menu){menu=menuChosen;}//select that menu
                    else{menu=-n1;}//choose none
                if(menu==n1){instance_create(0,0,ui_home);}//home ui
                else if(menu==n3){instance_create(0,0,ui_quest);}//quest ui
                    else{mtime=n2*n5;}
                page=n0;//reset_page
            }
            else if(mouse_y&gt;=160){ switch(menu){
                //shop
                case 0:
                    //back
                    if(mouse_x&lt;120){func_sound_click();
                        if(page&gt;n0){
                            page=page-n1;
                        }
                    }
                    //fw
                    else if(mouse_x&gt;600){func_sound_click();
                        var nextPage = (n9 + n3) * (page+n1);
                        if(nextPage&lt;ds_list_size(global.shop_item_id)){
                            page=page+n1;
                        }
                    }
                    //choose item
                    else{
                        var currentPage = ((n9 + n3) * page);
                        var select = clamp(floor((mouse_y-320)/160),0,3)+currentPage;
                        //show_dialog
                        if(select&lt;ds_list_size(global.shop_item_id)){func_sound_click();
                            var d = instance_create(0,0,ui_dialog_shop);
                            d.target=clamp(select,n0,ds_list_size(global.shop_item_id)-n1);
                        }
                    }
                    break;
                //gacha
                case 2:
                    //1 draw
                    if(mouse_x&gt;=120&amp;&amp;mouse_y&gt;=820 &amp;&amp; mouse_x &lt;=360 &amp;&amp; mouse_y &lt;= 960){func_sound_click();
                        if(func_gp(GP_CMD_GET,-n1,-n1)&gt;=n1){
                            //1 perform
                            global.gacha_perform = n1;
                            next_room = room_gacha;
                            state=n1;
                        }
                        else{
                            //insufficient
                            var d = instance_create(0,0,ui_dialog_alert);
                            d.text=global.txt_gacha_insufficient;
                            d.buttontext=global.txt_ok;
                        }
                    }
                    //10 draw
                    else if(mouse_x&gt;=360&amp;&amp;mouse_y&gt;=820 &amp;&amp; mouse_x &lt;=600 &amp;&amp; mouse_y &lt;= 960){func_sound_click();
                        if(func_gp(GP_CMD_GET,-n1,-n1)&gt;=n9+n1){
                            //1 perform
                            global.gacha_perform = n9+n1;
                            next_room = room_gacha;
                            state=n1;
                        }
                        else{
                            //insufficient
                            var d = instance_create(0,0,ui_dialog_alert);
                            d.text=global.txt_gacha_insufficient;
                            d.buttontext=global.txt_ok;
                        }
                    }
                    break;
                //adventure
                default:
                    if(mouse_x&gt;=160 &amp;&amp; mouse_y &gt;= 800 &amp;&amp; mouse_x&lt;=560 &amp;&amp; mouse_y&lt;=960){func_sound_click();
                        instance_create(0,0,ui_team);
                    }
                    break;
            }}
        }
    }}
}
else {
    if(stime&gt;0){stime--;}//anim_out
    else if(next_room&gt;-n1){room_goto(next_room);}//next_room
    else{game_end();}//end game
}
//draw_bottom
draw_sprite_ext(spr_menu,3,360,600,2-st,2-st,0,c_white,st);
//draw_menu
var da=1; var dy=0;//menu_anim
if(mtime&lt;45){mtime++;da=mtime/45;dy=-func_dy(mtime,45);}//dy=1200*(cos(degtorad(90*da)))
switch(menu){
    case 0://shop
        //bg
        draw_sprite_ext(spr_shop,0,360,dy+600,1,1,0,c_white,da);
        //title
        draw_sharp_text(360,dy+190,global.txt_shop,global.font,fa_middle,fa_center,c_black);
        //list
        for(i=0;i&lt;12;i++){
            if(page+i&lt;ds_list_size(global.shop_item_id)){
                var s = spr_item;//type_item
                var px= 160;
                var py= dy+400+160*i;
                if(global.shop_item_type[|page+i]&gt;n0){s=spr_tool;}//type_tool
                draw_sprite_ext(s,global.shop_item_id[|page+i],px,py,4/3,4/3,0,c_white,da);
                draw_set_alpha(da);
                draw_sharp_text(dy+px+120,py-20,global.txt_item_name[global.shop_item_id[|page+i]]+RETURN+string(global.shop_item_price[|page+i] * 5)+" RP",global.font,fa_left,fa_center,c_black);
                draw_set_alpha(1);
            }
        }
        break;
    case 2://gacha
        //bg
        draw_sprite_ext(spr_gacha,0,360,dy+600,1,1,0,c_white,da);
        //title
        draw_sharp_text(360,dy+190,global.txt_gacha,global.font,fa_middle,fa_center,c_black);
        //text
        draw_sharp_text(240,dy+840,"1 "+global.txt_round,global.font,fa_middle,fa_top,c_black);
        var txtTen = "10 "+global.txt_round; if(global.lang==n0){txtTen+="s";}
        draw_sharp_text(480,dy+840,txtTen,global.font,fa_middle,fa_top,c_black);
        break;
    default:
        //home menu
        if(!instance_exists(ui_home) &amp;&amp; !instance_exists(ui_quest)){menu=-n1;}
        //go_button
        draw_sprite_ext(spr_menu,2,360,dy+600,1,1,0,c_white,da);
        draw_shadowed_text(380,dy+880,global.txt_adventure,global.font_large,fa_middle,fa_center,c_gray);
        break;
}
//draw_fade_menu
draw_set_colour(make_colour_rgb(80,75,67));
draw_set_alpha(8*(60-stime)/60);
draw_rectangle(0,0,720,1200,false);
draw_set_colour(c_white);
draw_set_alpha(1);
//draw_center
draw_sprite_ext(spr_menu,0,360,600,2-st,2-st,0,c_white,st);
//draw_backlight
var lx=-1;
switch(menu){
    case 0:lx=120;break;
    case 1:lx=280;break;
    case 2:lx=440;break;
    case 3:lx=600;break;
}
if(lx&gt;-1){draw_sprite_ext(spr_flash,0,lx,1080,1,1,0,c_yellow,st);}
//draw_top
draw_sprite_ext(spr_menu,1,360,600,2-st,2-st,0,c_white,st);
//draw_text
if(stime&gt;=60){
    //draw player name, rank, rp, gp
    draw_shadowed_text(360,20,global.data[?NAME],global.font,fa_middle,fa_top,c_black);
    draw_shadowed_text(120,120,floor(global.data[?RANK]),global.font,fa_middle,fa_center,c_white);
    draw_shadowed_text(400,120,floor(global.data[?RP]),global.font,fa_middle,fa_center,c_white);
    draw_shadowed_text(640,120,gp_amount,global.font,fa_middle,fa_center,c_white);
    //draw_labels
    draw_sharp_text_ext(120,1160,global.txt_shop, global.font,fa_middle,fa_center,c_black,0,160,0.7,0.7,0);
    draw_sharp_text_ext(280,1160,global.txt_home, global.font,fa_middle,fa_center,c_black,0,160,0.7,0.7,0);
    draw_sharp_text_ext(440,1160,global.txt_gacha,global.font,fa_middle,fa_center,c_black,0,160,0.7,0.7,0);
    draw_sharp_text_ext(600,1160,global.txt_event,global.font,fa_middle,fa_center,c_black,0,160,0.7,0.7,0);
}
//draw_fade_main
draw_set_colour(c_black);
draw_set_alpha((60-stime)/60);
draw_rectangle(0,0,720,1200,false);
draw_set_colour(c_white);
draw_set_alpha(1);
//draw_menu_animation
if(irandom_range(0,99)&lt;4){
    //leaf
    var leaf = instance_create(irandom_range(-600,0),irandom_range(-600,0),anim_fall);leaf.depth=irandom_range(12,22); leaf.sprite_index=spr_leaf;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
