<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_gameplay</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>5</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///prepare
state=n0;
stime=n0;
stime2=n0;
home=-n1; //pointer for ui_home
map_init();//build a map
instance_create(0,240,tile_controller);//create tiles
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///script
var dy = func_dy(stime,60);
var dy2= func_dy(stime2,30);
var st = stime/60;
var st2= stime2/30;
//draw_tile_cover
draw_set_colour(make_colour_rgb(80,75,67));
draw_set_alpha((30-stime2)/30);
draw_rectangle(0,0,720,1200,false);
draw_set_colour(c_white);
draw_set_alpha(1);
//draw_bottom
draw_sprite_ext(spr_gameplay,1,360,600,2-st,2-st,0,c_white,st);
//draw_worker_portrait
var worker = global.work[|global.team[#global.map_team,global.current_work]];
draw_sprite_ext(spr_worker_icon,ds_map_find_value(worker,ID),80,80,0.833333,0.833333,0,c_white,st2);
//draw_top
draw_sprite_ext(spr_gameplay,0,360,600,2-st,2-st,0,c_white,st);
//draw_current_item
draw_sprite_ext(spr_item,global.current_item,590,1080,1.75,1.75,0,c_white,st2);
draw_set_alpha(st2); //set fade stage
//draw_current_item_amount
draw_shadowed_text(670,1170,func_item_amount(global.current_item),global.font,fa_right,fa_bottom,c_white);
//draw_status
draw_sharp_text_ext(170,10,global.txt_worker_order+string(global.current_work+1)+" "+global.txt_lvl+string(ds_map_find_value(worker,LV)),global.font,fa_left,fa_center,c_black,0,1080,0.6,0.6,0);
//draw_hp
draw_sprite_part(spr_hp_bar, 0, 0,0, 3 * global.work_hp[global.current_work], 20, 170, 50);
//draw_sp
draw_sprite_part(spr_sp_bar, 0, 0,0, 300 * (global.work_sp[global.current_work] / global.work_msp[global.current_work]), 20, 170, 90);
//draw_item_drop
if(global.noti_item_drop_id&gt;-1){
    draw_sprite_ext(spr_item, global.noti_item_drop_id, 40,200, 0.333333, 0.333333, 0, c_white, st2);
    draw_shadowed_text_ext(80, 185, "x"+string(global._itemDropAmount), global.font, fa_left, fa_center, c_white, 0, 720, 0.6,0.6,0);
}
//draw_auto_button
draw_sprite(spr_auto_button,global.work_at[global.current_work],0,840);
//draw_all_button
draw_sprite(spr_all_button,global.all_walk_enabled,120,840);
//draw_pick_button
draw_sprite(spr_pick_button,0,480,840);
//draw_choose_button
draw_sprite(spr_choose_button,0,600,840);
draw_set_alpha(1); //reset fade stage
//draw_holding_tool
var wTool = ds_map_find_value(global.tool[|ds_map_find_value(worker,TOOL)],ID);
if(wTool&gt;-1){draw_sprite_ext(spr_tool,wTool,360,1080,1.50,1.50,0,c_white,st2);}
//show sleep text if anyone is on the bed
if(func_worker_on_bed()){
    draw_shadowed_text(380,660,"&lt; "+global.txt_sleep+" &gt;",global.font,fa_middle,fa_top,c_white);
}
//draw_fade_main
draw_set_colour(c_black);
draw_set_alpha((60-stime)/60);
draw_rectangle(0,0,720,1200,false);
draw_set_colour(c_white);
draw_set_alpha(1);
//home ui
if(home&gt;-n1){
    if(!instance_exists(home)){
        if(global.map_file=="home"){
            //refresh worker data if we are in home (for load new tools)
            func_worker_setup();
        home=-n1;}//reset
    }
}
//anim
if(state==0){
    if(stime&lt;60){stime++;}
    else if(stime2&lt;30){stime2++;}
    else {
        //click
        if(mouse_check_button_released(mb_left)){if(!(instance_exists(ui_home)&amp;&amp;!(instance_exists(ui_dialog)))){
            //open home menu
            if(mouse_x&gt;=30&amp;&amp;mouse_y&gt;=980&amp;&amp;mouse_x&lt;=230&amp;&amp;mouse_y&lt;=1180) {home=instance_create(0,0,ui_home);func_sound_click();}
            //switch worker
            else if(mouse_x&gt;=20&amp;&amp;mouse_y&gt;=20&amp;&amp;mouse_x&lt;=140&amp;&amp;mouse_y&lt;=140){func_worker_switch();func_sound_click();}
            //goto map
            else if(mouse_x&gt;=600&amp;&amp;mouse_y&gt;=40&amp;&amp;mouse_x&lt;=680&amp;&amp;mouse_y&lt;=120){state=n1;func_sound_click();}
            //use something
            else if(mouse_x&gt;=320-10&amp;&amp;mouse_y&gt;=560-10&amp;&amp;mouse_x&lt;=400+10&amp;&amp;mouse_y&lt;=640+10){func_sound_click();
                //sleep
                if(!instance_exists(anim_fade_in)){if(func_worker_on_bed()){
                    func_worker_sleep();
                    //fx
                    fx_fade_in(c_black,240);
                }}
            }
        }}
    }
}
else{
    if(stime2&gt;0){stime2--;}
    else if(stime&gt;0){stime--;}
    else{
        //quit area
        map_close();
        game_save_data();
        room_goto(room_map);
    }
}
//deactivate tile controller if we are in home menu
if(instance_exists(ui_home)){
    global.game_paused = n1;
}
else{
    global.game_paused = n0;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
